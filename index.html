<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Download GPX File</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <script>
        async function downloadGPXFile(url) {
            try {
                const response = await axios.get(url, { responseType: 'blob' });
                const blobUrl = window.URL.createObjectURL(new Blob([response.data]));
                const link = document.createElement('a');
                link.href = blobUrl;
                link.setAttribute('download', 'route.gpx'); // Specify the file name
                document.body.appendChild(link);
                link.click();

                // Clean up and revoke the URL object
                document.body.removeChild(link);
                window.URL.revokeObjectURL(blobUrl);
            } catch (error) {
                console.error(`An error occurred: ${error.message}`);
            }
        }
        const startLongitude = 6.325962;
        const startLatitude = 45.963084;
        const endLongitude = 5.5494965842940385;
        const endLatitude = 44.288420831829306;
        const fileURL = `https://bikerouter.de/brouter-engine/brouter?lonlats=${startLongitude},${startLatitude}|${endLongitude},${endLatitude}&profile=fastbike-asia-pacific&alternativeidx=0&format=gpx`;

        async function uploadProfile() {
            try {
                //load the brouter config file
                const configFile = 'profile.brf';

                // Use axios to get the file content
                const response = await axios.get(configFile);
                const fileContent = response.data;
                console.log("File content:", fileContent);

                // Now use fileContent as the body of your POST request
                // const postResponse = await axios.post('YOUR_ENDPOINT_URL', fileContent, {
                //     headers: {
                //         'Content-Type': 'text/plain', // Ensure this is the correct content type for your needs
                //     }
                // });

                // // Handle the response from your POST request
                // console.log(postResponse.data);
            } catch (error) {
                // Error handling for both GET and POST requests
                console.error('Request failed', error);
            }
        };

    </script>
    <button onclick="downloadGPXFile(fileURL);">Download GPX File</button>
    <button onclick ="uploadProfile()">Upload Config</button>
</body>
</html>
